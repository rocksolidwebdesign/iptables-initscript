============================
SysV Initscript for Iptables
============================

Lets you turn your firewall on or off by running e.g.::

    sudo service iptables start

or::

    sudo service iptables stop

Installation
============

Just run the handy install script::

    sudo ./install.sh

Or to get rid of it, the uninstall script::

    sudo ./uninstall.sh

What You Get
------------

This will install a standard "init script" style shell script to::

    /etc/init.d/iptables

meaning you can run::

    sudo service iptables start

Which simply reads loads your rules from::

    /etc/iptables/up.rules

and your  new changes should  be in  effect. You can check them by using::

    sudo service iptables status

Service Commands
================

Here are  the commands that ``service iptables`` accepts

* ``start`` ``stop`` and ``reset`` will  all load  in the  current rules
  in ``up.rules``

* ``lock`` does nothing, maybe it should? I dunno.

* ``status`` is just an alias for ``iptables -vL``

Utility Scripts
===============

There  are a  number of  utility scripts  that begin  with ``fw-``  like
``fw-up`` and  ``fw-down`` to start  and stop the firewall.  The service
script actually  just calls these  scripts. There  are a couple  more of
these than just what is available through the service, since the service
is only for automatically starting the firewall on boot.

Here are the scripts and what they do

* ``fw-up``   loads   the   rules  in   ``/etc/iptables/up.rules``   via
  ``iptables-restore``

* ``fw-down`` loads the rules in ``/etc/iptables/down.rules``. Basically
  this  is   an  empty  rules   file  that  allows   everything  because
  iptables-restore is good at flushing the  previous rule sets so we let
  iptables flush  the previous  rule set  and then  just don't  load any
  rules  which  essentially amounts  to  "disabling"  or "stopping"  the
  firewall because it won't block anything anymore.

* ``fw-save``     will     save      your     current     ruleset     to
  ``/etc/iptables/saved.rules``

* ``fw-restore``     will     load      the     saved     rules     from
  ``/etc/iptables/saved.rules``

* ``fw-resave`` will  save your current ruleset,  like ``fw-save`` does,
  but will reset the packet counters back to zero

* ``fw-lock`` is just  an opaque no-op (no operation) to  make it easier
  to integrate with the sysv initscript. It really does nothing.

The Example Rules Files
=======================

In your ``/etc/iptables`` folder you will find a few example rules files.
Here's a list of what they are and what they do.

* ``ssh.rules`` shows you how to open up  just the SSH port and just for
  your IP

* ``webserver.rules`` shows how to use multiport syntax and shows how to
  open ports for any IP

* ``flyspray.rules`` basically  prevents people  from trying  to connect
  too many times too fast, like flies smacking against a window. Setting
  limits  like  this  helps  prevent  bot  attacks.  This  was  actually
  generated by ``flyspray.sh`` which has  all the explantions of how and
  why these rules work

Check out my beginner's ipables tutorial at

http://rocksolidwebdesign.com/tutorials/basic-firewall-howto-for-iptables/
